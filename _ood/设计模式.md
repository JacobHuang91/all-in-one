---
title: 设计模式
order: 10
date: 2020-12-01 21:05:03

layout: post
tags: OOD
categories: OOD
keywords: OOD
description:
cover:
top_img:
toc:
toc_number:
copyright:
---

### Singleton

> 通过保证一个 class 只有一个 instance，使得全局可以访问同一个 instance

#### 基本型

- 构造函数是 private 的，因此外部不能使用 new 来创建 instance
- 提供一个 static 方法来访问 instance，实现全局可访问
- 第一次调用时通过 private 构造函数创建 instance
- instance 是 static 和 private 的

```java
public class ParkingLot {
  private static ParkingLot _instance = null;

  private List<Level> levels;

  private ParkingLot() {
    levels = new ArrayList<>();
  }

  public static ParkingLot getInstance() {
    if (_instance == null) {
      _instance = new ParkingLot();
    }

    return _instance;
  }
}
```

### 线程安全型

- synchronized 关键字确保某一时间只有一个线程可以调用 instance，其他线程需要等待
- 缺点是性能较差，需要等待

```java
public class ParkingLot {
  private static ParkingLot _instance = null;

  private List<Level> levels;

  private ParkingLot() {
    levels = new ArrayList<>();
  }

  public static synchronized ParkingLot getInstance() {
    if (_instance == null) {
      _instance = new ParkingLot();
    }

    return _instance;
  }
}
```
